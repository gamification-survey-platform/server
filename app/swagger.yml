openapi: 3.0.0
info:
  title: GAMIFICATION-PLATFORM API doc
  description: API doc for Gamification-platform
  version: 1.0.0
servers:
  - url: http://127.0.0.1:8000/
    description: local server
tags:
  - name: User
    description: Operations regarding user
paths:
  "/users":

    get:
      security:
        - bearerAuth: []
      tags:
        - User
      parameters:
        - $ref: "#/components/parameters/criteria"
      description: Get all users
      summary: Get (Search) all users
      responses:
        "200":
          description: Get all users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
              example:
                [
                  { "andrewId": "XXX", "online": true },
                  { "andrewId": "XXX", "online": true },
                  { "andrewId": "XXX", "online": false },
                ]
  "/users/{andrewId}":

    get:
      security:
        - bearerAuth: []
      tags:
        - User
      summary: Get a part of user
      description: Get a part of user
      parameters:
        - $ref: "#/components/parameters/andrewId"
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                type: object
              example:
                andrewId: "XXX"
                online: true
        "403":
          description: No access (illegal access to other users' info).

  "/users/login":
    post:
      security:
        - bearerAuth: []
      tags:
        - User
      summary: Login
      description: User login
      parameters:
        - in: query
          name: andrew_id
          schema:
            type: string
        - in: query
          name: password
          schema:
            type: string
        
      responses:
        "200":
          description: success
        "404":
          description: User not exist
        "400":
          description: Andrew ID and password do not match

  "/users/register":
    post:
      security:
        - bearerAuth: []
      tags:
        - User
      summary: Register
      description: Register new account
      parameters:
        - in: query
          name: andrew_id
          schema:
            type: string
        - in: query
          name: password
          schema:
            type: string
        
      responses:
        "200":
          description: success
        "400":
          description: The user name already existed


components:
  parameters:
    andrewId:
      name: andrewId
      in: path
      description: AndrewId of the user
      required: true
      schema:
        type: string
    user:
      name: andrewId
      in: query
      description: AndrewId of the user
      required: false
      schema:
        type: string
    criteria:
      in: query
      name: criteria
      description: Search criteria
      required: false
      schema:
        type: string

  schemas:
    User:
      type: object
      properties:
        andrew_id:
          type: string
        password:
          type: string
          format: password
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        is_staff:
          type: boolean
        is_active:
          type: boolean
        date_joined:
          type: string
          format: date-time
